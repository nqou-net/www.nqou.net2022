---
categories:
  - 情報技術について
comment: false
date: 2007-11-01 15:02:44
id: 1111
iso8601: 2007-11-01T15:02:44+09:00
tags:
  - undef
title: コードの書き直しで失敗

---

<div class="entry-body">
                                 <p><a href="http://jibun.atmarkit.co.jp/ljibun01/rensai/sinji06/sinji01.html">この汚いコード、明日までに書き直しちゃえ！ ? ＠IT自分戦略研究所</a></p>

<p>なんというか、書き直したわけではないのですが、新しく機能を追加してバグを生んでしまったというお話です。</p>

<p>機能といっても、渡された引数の中身を見て必要ならエスケープする、という単純な事なのですが。<br />
で、書き直した時は従来の機能を損なわずに変更したつもりでした。<br />
しかし、見事に損なっていたわけです。</p>

<p>エスケープするつもりの無いものまでがエスケープされてしまっていました。</p>

<p>敗因は、面倒くさがって自動的に判別させようとした、という事だろうと結論付けています。<br />
エスケープが必要な場合は、スイッチになる引数を渡す、という処理をすればよかったのだと。<br />
今はそう思っています。</p>

<p>…結局、そのバグは下手に触れないので、呼び出し側で何とかしましたが、いずれは直さないといけないなと思いながら、それでまたバグが…と思うとなかなか無理です。<br /></p>
                              </div>    	